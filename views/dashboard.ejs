<% if (user_type == "client") { %>
    <!-- Client Dashboard -->
    <div class="container-fluid">
        <div class="mt-3">
        <%- include ("./partials/messages"); %>
        </div>
            <div class="row">
                <div class="col-md-4">
                    <div class="m-3 border rounded bg-white shadow">
                        <div class="nav flex-column nav-pills m-3" id="v-pills-tab" role="tablist"
                            aria-orientation="vertical">
                            <h4>Services</h4>
                            <hr>
                            <button class="nav-link p-3 text-uppercase active" id="v-pills-consult-tab" data-bs-toggle="pill"
                                data-bs-target="#v-pills-consult" type="button" role="tab" aria-controls="v-pills-consult"
                                aria-selected="true"><i class="fas fa-balance-scale"></i> Consult</button>
                            <button class="nav-link  p-3 text-uppercase" id="v-pills-advice-tab" data-bs-toggle="pill"
                                data-bs-target="#v-pills-advice" type="button" role="tab" aria-controls="v-pills-advice"
                                aria-selected="false"><i class="fas fa-comment-medical"></i> Advice</button>
                            <h4>Status</h4>
                            <hr>
                            <button class="nav-link p-3 text-uppercase" id="v-pills-transaction-tab" data-bs-toggle="pill"
                                data-bs-target="#v-pills-transaction" type="button" role="tab"
                                aria-controls="v-pills-transaction" aria-selected="false"><i class="fas fa-receipt"></i>
                                Transactions</button>
                        </div>
                    </div>
                </div>
                <div class="col-md-8">
                    <div class="m-3 border rounded bg-white shadow">
                        <div class="tab-content" id="v-pills-tabContent">
                            <div class="tab-pane fade show active" id="v-pills-consult" role="tabpanel"
                                aria-labelledby="v-pills-consult-tab">
                                <!-- Consult Form -->
                                <%- include ("./partials/consultation-form") %>
                            </div>
                            <div class="tab-pane fade" id="v-pills-advice" role="tabpanel"
                                aria-labelledby="v-pills-advice-tab">
                                <!-- Advice Form -->
                                <%- include ("./partials/advice-form") %>
                            </div>
                            <div class="tab-pane fade" id="v-pills-transaction" role="tabpanel"
                                aria-labelledby="v-pills-transaction-tab">
                                <div>
                                    <!-- ONGOING TABLE -->
                                    <%- include ("./partials/transactions-table") %> 
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
    </div>
<% } else { %>
    <!-- Lawyer Dashboard -->
    <div class="container-fluid">
        <%- include ("./partials/messages"); %>
        <div class="row">
            <div class="col-md-4">
                <div class="m-3 border rounded bg-white shadow">
                    <div class="nav flex-column nav-pills m-3" id="v-pills-tab" role="tablist"
                        aria-orientation="vertical">
                        <h4>Services</h4>
                        <hr>
                        <button class="nav-link active p-3 text-uppercase" id="v-pills-advice-tab" data-bs-toggle="pill"
                            data-bs-target="#v-pills-advice" type="button" role="tab" aria-controls="v-pills-advice"
                            aria-selected="true"><i class="fas fa-comment-medical"></i> Advice</button>
                        <button class="nav-link p-3 text-uppercase" id="v-pills-consult-tab" data-bs-toggle="pill"
                            data-bs-target="#v-pills-consult" type="button" role="tab" aria-controls="v-pills-consult"
                            aria-selected="false"><i class="fas fa-balance-scale"></i> Consultion Requests</button>
                        <h4>Status</h4>
                        <hr>
                        <button class="nav-link p-3 text-uppercase" id="v-pills-transaction-tab" data-bs-toggle="pill"
                            data-bs-target="#v-pills-transaction" type="button" role="tab"
                            aria-controls="v-pills-transaction" aria-selected="false"><i class="fas fa-receipt"></i>
                            Transactions</button>
                    </div>
                </div>
            </div>
            <div class="col-md-8">
                <div class="m-3 border rounded bg-white shadow">
                    <div class="tab-content" id="v-pills-tabContent">
                        <div class="tab-pane fade show active" id="v-pills-advice" role="tabpanel"
                            aria-labelledby="v-pills-advice-tab">
                            <div>
                                <!-- Advice Req TABLE -->
                                <table class="table table-striped">
                                    <thead>
                                        <tr>
                                            <th scope="col">Legal Title</th>
                                            <th scope="col">Client Name</th>
                                            <th></th>
                                        </tr>
                                        <tr>
                                            <td>Physical abuse</td>
                                            <td>Pedro</td>
                                            <td><a href="test_details.html"><button
                                                        class="btn btn-primary">Advice</button></a></td>
                                        </tr>
                                    </thead>
                                </table>
                            </div>
                        </div>
                        <div class="tab-pane fade" id="v-pills-consult" role="tabpanel"
                            aria-labelledby="v-pills-consult-tab">
                            <div>
                                <!-- Consult Req TABLE -->
                                <div style="overflow: auto">
                                    <table class="table table-striped" overflow: auto>
                                        <thead>
                                            <thead>
                                                <th scope="col">#Case ID</th>
                                                <th scope="col">Legal Title</th>
                                                <th scope="col">Status</th>
                                                <th></th>
                                            </thead>
                                            <% result.forEach(complaint => { %> 
                                                <% if (user_id.equals(complaint._id)) { %>
                                                    <% for( let index = 0; index < complaint.complaints.length; index++ ) { %>
                                                        <% if (complaint.complaints[index].case_status == "pending") { %>
                                                            <tr>
                                                                <td><%- complaint.complaints[index]._id %> </td>
                                                                <td><%- complaint.complaints[index].legal_title %> </td>
                                                                <td><%- complaint.complaints[index].case_status %> </td>
                                                                <td><a href="/form/complaints/<%- complaint.complaints[index]._id %>" class="btn btn-primary"><i class="far fa-eye"></i> View</a></td>
                                                            </tr>
                                                        <% } %>
                                                    <% } %>
                                                <% } %>
                                            <% }) %> 
                                        </thead>
                                    </table>
                                </div>
                            </div>

                        </div>
                        <div class="tab-pane fade" id="v-pills-transaction" role="tabpanel"
                            aria-labelledby="v-pills-transaction-tab">
                            <div>
                                <!-- ONGOING TABLE -->
                                <div style="overflow: auto">
                                    <table class="table table-striped" overflow: auto>
                                        <thead>
                                            <thead>
                                                <th scope="col">#Case ID</th>
                                                <th scope="col">Legal Title</th>
                                                <th scope="col">Status</th>
                                                <th scope="col">Appointment Date</th>
                                                <th></th>
                                            </thead>
                                            <% result.forEach(complaint => { %> 
                                                <% if (user_id.equals(complaint._id)) { %>
                                                    <% for( let index = 0; index < complaint.complaints.length; index++ ) { %>
                                                        <% if (complaint.complaints[index].case_status == "ongoing") { %>
                                                            <tr>
                                                                <td><%- complaint.complaints[index]._id %> </td>
                                                                <td><%- complaint.complaints[index].legal_title %> </td>
                                                                <td><%- complaint.complaints[index].case_status %> </td>
                                                                <td><%- complaint.complaints[index].appointment_date %> </td>
                                                                <td><a href="/form/complaints/<%- complaint.complaints[index]._id %>" class="btn btn-primary"><i class="far fa-eye"></i> View</a></td>
                                                            </tr>
                                                        <% } %>
                                                    <% } %>
                                                <% } %>
                                            <% }) %> 
                                        </thead>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
<% } %>
